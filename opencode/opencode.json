{
  "$schema": "https://opencode.ai/config.json",
  "plugin": [
    "opencode-gemini-auth@latest",
    "@tarquinen/opencode-dcp@latest",
    "@nick-vi/opencode-type-inject@latest",
    "@franlol/opencode-md-table-formatter@latest"
  ],

  "model": "openai/gpt-5.3-codex",
  "small_model": "openai/gpt-5-mini",

  "theme": "opencode",
  "autoupdate": true,
  "share": "manual",

  "compaction": {
    "auto": true,
    "prune": true
  },

  "server": {
    "port": 4096,
    "hostname": "0.0.0.0"
  },

  "agent": {
    "build": {
      "mode": "primary",
      "model": "openai/gpt-5.3-codex",
      "variant": "high",
      "description": "Agent principal - implementation"
    },
    "plan": {
      "mode": "primary",
      "model": "kimi-for-coding/k2p5",
      "description": "Planification et analyse (etape 1 - K2.5)"
    },
    "plan_review": {
      "mode": "primary",
      "model": "openai/gpt-5.3-codex",
      "variant": "xhigh",
      "description": "Review de plan (etape 2 - Lead SWE)",
      "prompt": "As a lead software engineer review and update this plan"
    }
  },

  "mcp": {
    "context7": {
      "type": "remote",
      "url": "https://mcp.context7.com/mcp",
      "enabled": true
    },
    "gh_grep": {
      "type": "remote",
      "url": "https://mcp.grep.app",
      "enabled": true
    },
    "github": {
      "type": "local",
      "command": ["npx", "-y", "@modelcontextprotocol/server-github"],
      "environment": {
        "GITHUB_PERSONAL_ACCESS_TOKEN": "{env:GITHUB_TOKEN}"
      },
      "enabled": true
    }
  },

  "permission": {
    "edit": "allow",
    "bash": "allow"
  },

  "command": {
    "test": {
      "template": "Run the test suite and fix failing tests.",
      "description": "Run tests"
    },
    "review": {
      "template": "Review changes for security and best practices. @review",
      "description": "Code review"
    }
  }
}
